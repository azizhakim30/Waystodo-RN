{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from \"react\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\nimport { StatusBar } from \"native-base\";\nimport { MaterialIcons, FontAwesome5, MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport AddList from \"./src/components/screen/AddList\";\nimport Home from \"./src/components/screen/Home\";\nimport Login from \"./src/components/screen/Login\";\nimport Register from \"./src/components/screen/Register\";\nimport List from \"./src/components/screen/List\";\nimport Categories from \"./src/components/screen/Categories\";\nimport Detail from \"./src/components/screen/Detail\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Stack = createStackNavigator();\nvar Tab = createBottomTabNavigator();\nif (AsyncStorage.token) {\n  setAuthToken(AsyncStorage.token);\n}\nvar ButtonTab = function ButtonTab() {\n  var _React$useContext = React.useContext(UserContext),\n    _React$useContext2 = _slicedToArray(_React$useContext, 2),\n    state = _React$useContext2[0],\n    dispatch = _React$useContext2[1];\n  var _React$useState = React.useState(true),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    isLoading = _React$useState2[0],\n    setIsloading = _React$useState2[1];\n  useEffect(function () {\n    if (state.isLogin === false && !isLoading) {\n      navigate(\"/\");\n    } else {\n      if (state.user.role === \"admin\") {\n        navigate(\"/transaction\");\n      } else if (state.user.role === \"user\") {\n        navigate(\"/\");\n      }\n    }\n    setAuthToken(localStorage.token);\n  }, [state]);\n  var checkUser = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var response = yield API.get(\"/auth/verify-token\");\n        if (response.status === 404) {\n          return dispatch({\n            type: \"AUTH_ERROR\"\n          });\n        }\n        var payload = response.data.data;\n        payload.token = localStorage.token;\n        dispatch({\n          type: \"USER_SUCCESS\",\n          payload: payload\n        });\n        console.log(\"state check auth\", state);\n        setIsloading(false);\n      } catch (error) {\n        console.log(error);\n        setIsloading(false);\n      }\n    });\n    return function checkUser() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    checkUser();\n  }, []);\n  return _jsxs(Tab.Navigator, {\n    screenOptions: function screenOptions(_ref2) {\n      var route = _ref2.route;\n      return {\n        headerShown: false,\n        tabBarLabel: function tabBarLabel() {\n          return null;\n        },\n        tabBarIcon: function tabBarIcon(_ref3) {\n          var focused = _ref3.focused;\n          var bgColor;\n          if (route.name == \"List\") {\n            bgColor = focused ? \"#FF5555\" : \"#D9D9D9\";\n            return _jsx(FontAwesome5, {\n              name: \"clipboard-list\",\n              size: 25,\n              color: bgColor\n            });\n          } else if (route.name == \"AddList\") {\n            bgColor = focused ? \"#FF5555\" : \"#D9D9D9\";\n            return _jsx(MaterialCommunityIcons, {\n              name: \"clipboard-plus\",\n              size: 25,\n              color: bgColor\n            });\n          } else if (route.name == \"Categories\") {\n            bgColor = focused ? \"#FF5555\" : \"#D9D9D9\";\n            return _jsx(MaterialIcons, {\n              name: \"category\",\n              size: 25,\n              color: bgColor\n            });\n          }\n        }\n      };\n    },\n    children: [_jsx(Stack.Screen, {\n      name: \"List\",\n      component: List\n    }), _jsx(Stack.Screen, {\n      name: \"AddList\",\n      component: AddList\n    }), _jsx(Stack.Screen, {\n      name: \"Categories\",\n      component: Categories\n    })]\n  });\n};\nvar Containers = function Containers() {\n  return _jsxs(NavigationContainer, {\n    children: [_jsx(StatusBar, {}), _jsxs(Stack.Navigator, {\n      children: [_jsx(Stack.Screen, {\n        name: \"Home\",\n        component: Home,\n        options: {\n          headerShown: false\n        }\n      }), _jsx(Stack.Screen, {\n        name: \"Login\",\n        component: Login,\n        options: {\n          headerShown: false\n        }\n      }), _jsx(Stack.Screen, {\n        name: \"Register\",\n        component: Register,\n        options: {\n          headerShown: false\n        }\n      }), _jsx(Stack.Screen, {\n        name: \"MyTodo\",\n        component: ButtonTab,\n        options: {\n          headerShown: false,\n          headerTintColor: \"white\",\n          headerMode: \"screen\"\n        }\n      }), _jsx(Stack.Screen, {\n        name: \"Detail\",\n        component: Detail,\n        options: {\n          headerShown: true,\n          headerMode: \"screen\"\n        }\n      })]\n    })]\n  });\n};\nexport default Containers;","map":{"version":3,"names":["React","NavigationContainer","createStackNavigator","createBottomTabNavigator","StatusBar","MaterialIcons","FontAwesome5","MaterialCommunityIcons","AsyncStorage","AddList","Home","Login","Register","List","Categories","Detail","Stack","Tab","token","setAuthToken","ButtonTab","useContext","UserContext","state","dispatch","useState","isLoading","setIsloading","useEffect","isLogin","navigate","user","role","localStorage","checkUser","response","API","get","status","type","payload","data","console","log","error","route","headerShown","tabBarLabel","tabBarIcon","focused","bgColor","name","Containers","headerTintColor","headerMode"],"sources":["/home/aziz/Desktop/mobile/container.js"],"sourcesContent":["import React from \"react\"\nimport { NavigationContainer } from \"@react-navigation/native\"\nimport { createStackNavigator } from \"@react-navigation/stack\"\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\"\nimport { StatusBar } from \"native-base\"\nimport {\n  MaterialIcons,\n  FontAwesome5,\n  MaterialCommunityIcons,\n} from \"@expo/vector-icons\"\nimport AsyncStorage from \"@react-native-async-storage/async-storage\"\n\nimport AddList from \"./src/components/screen/AddList\"\nimport Home from \"./src/components/screen/Home\"\nimport Login from \"./src/components/screen/Login\"\nimport Register from \"./src/components/screen/Register\"\nimport List from \"./src/components/screen/List\"\nimport Categories from \"./src/components/screen/Categories\"\nimport Detail from \"./src/components/screen/Detail\"\n\nconst Stack = createStackNavigator()\nconst Tab = createBottomTabNavigator()\n\nif (AsyncStorage.token) {\n  setAuthToken(AsyncStorage.token)\n}\n\nconst ButtonTab = () => {\n  const [state, dispatch] = React.useContext(UserContext)\n  const [isLoading, setIsloading] = React.useState(true)\n\n  useEffect(() => {\n    if (state.isLogin === false && !isLoading) {\n      navigate(\"/\")\n    } else {\n      if (state.user.role === \"admin\") {\n        navigate(\"/transaction\")\n      } else if (state.user.role === \"user\") {\n        navigate(\"/\")\n      }\n    }\n\n    setAuthToken(localStorage.token)\n  }, [state])\n\n  const checkUser = async () => {\n    try {\n      const response = await API.get(\"/auth/verify-token\")\n\n      if (response.status === 404) {\n        return dispatch({\n          type: \"AUTH_ERROR\",\n        })\n      }\n\n      let payload = response.data.data\n\n      payload.token = localStorage.token\n\n      dispatch({\n        type: \"USER_SUCCESS\",\n        payload,\n      })\n      console.log(\"state check auth\", state)\n      setIsloading(false)\n    } catch (error) {\n      console.log(error)\n      setIsloading(false)\n    }\n  }\n  useEffect(() => {\n    checkUser()\n  }, [])\n  return (\n    <Tab.Navigator\n      screenOptions={({ route }) => ({\n        headerShown: false,\n        tabBarLabel: () => {\n          return null\n        },\n        tabBarIcon: ({ focused }) => {\n          let bgColor\n          if (route.name == \"List\") {\n            bgColor = focused ? \"#FF5555\" : \"#D9D9D9\"\n            return (\n              <FontAwesome5 name=\"clipboard-list\" size={25} color={bgColor} />\n            )\n          } else if (route.name == \"AddList\") {\n            bgColor = focused ? \"#FF5555\" : \"#D9D9D9\"\n            return (\n              <MaterialCommunityIcons\n                name=\"clipboard-plus\"\n                size={25}\n                color={bgColor}\n              />\n            )\n          } else if (route.name == \"Categories\") {\n            bgColor = focused ? \"#FF5555\" : \"#D9D9D9\"\n            return <MaterialIcons name=\"category\" size={25} color={bgColor} />\n          }\n        },\n      })}\n    >\n      <Stack.Screen name=\"List\" component={List} />\n      <Stack.Screen name=\"AddList\" component={AddList} />\n      <Stack.Screen name=\"Categories\" component={Categories} />\n    </Tab.Navigator>\n  )\n}\n\nconst Containers = () => {\n  return (\n    <NavigationContainer>\n      <StatusBar />\n      <Stack.Navigator>\n        <Stack.Screen\n          name=\"Home\"\n          component={Home}\n          options={{ headerShown: false }}\n        />\n        <Stack.Screen\n          name=\"Login\"\n          component={Login}\n          options={{ headerShown: false }}\n        />\n        <Stack.Screen\n          name=\"Register\"\n          component={Register}\n          options={{ headerShown: false }}\n        />\n        <Stack.Screen\n          name=\"MyTodo\"\n          component={ButtonTab}\n          options={{\n            headerShown: false,\n            headerTintColor: \"white\",\n            headerMode: \"screen\",\n          }}\n        />\n        <Stack.Screen\n          name=\"Detail\"\n          component={Detail}\n          options={{ headerShown: true, headerMode: \"screen\" }}\n        />\n      </Stack.Navigator>\n    </NavigationContainer>\n  )\n}\n\nexport default Containers\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}